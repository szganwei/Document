# 1.1.1 è®¾å¤‡åŠ¨æ€åº“åŸºç¡€  

#### (1) ç®€ä»‹

Dynamic Link Library ä¸­æ–‡è¯‘ä¸ºåŠ¨æ€é“¾æ¥åº“ï¼Œç®€ç§° DLLï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¤§é‡å¯é‡å¤ä½¿ç”¨çš„ä»£ç å°è£…åˆ° DLL ä¸­ï¼Œä¾›ä¸€ä¸ªåŒ…å«å¯ç”±å¤šä¸ªç¨‹åºåŒæ—¶ä½¿ç”¨ã€‚DLL æä¾›äº†ä¸€ç§æ–¹æ³•ï¼Œä½¿è¿›ç¨‹å¯ä»¥è°ƒç”¨ä¸å±äºå…¶å¯æ‰§è¡Œä»£ç çš„å‡½æ•°ï¼ŒDLL åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå·²è¢«ç¼–è¯‘ã€é“¾æ¥å¹¶ä½¿ç”¨å®ƒä»¬çš„è¿›ç¨‹åˆ†å¼€å­˜å‚¨çš„å‡½æ•°ï¼ŒDLL æœ‰åŠ©äºå…±äº«æ•°æ®å’Œèµ„æºï¼Œå¤šä¸ªåº”ç”¨ç¨‹åºå¯ä»¥åŒæ—¶è®¿é—®å†…å­˜ä¸­å•ä¸ª DLL çš„å‰¯æœ¬å†…å®¹ã€‚ç®€è€Œè¨€ä¹‹ï¼ŒåŠ¨æ€é“¾æ¥åº“åœ¨ Windows å’Œ Linux ä¸‹ï¼Œä»¥ .dll åç¼€ç»“å°¾ï¼ŒåŒä¸€ä¸ª DLL æ–‡ä»¶å¯è¢«å¤šä¸ªç¨‹åºåŒæ—¶ä½¿ç”¨ã€æœ€å¤§ç¨‹åº¦å¤ç”¨ç›¸åŒçš„ä»£ç ã€æŠŠç¨‹åºåˆ†å¼€å¤šä¸ªéƒ¨åˆ†å¼€å‘ç­‰ã€‚

æœ¬æ–‡æ¡£æ‰€æŒ‡çš„è®¾å¤‡åŠ¨æ€åº“ï¼Œæ˜¯ä»¥æ•¢ä¸º IoTCenter å¹³å°ä¸ºæ ¸å¿ƒã€å¯¹æ¥è®¾å¤‡å¼€å‘çš„ä»£ç åº“(é©±åŠ¨ã€åè®®ç­‰å½¢å¼)ã€æä¾›ä»£ç ç»™ IoTCenter å¹³å°ä½¿ç”¨çš„åŠ¨æ€é“¾æ¥åº“ã€‚

æœ¬èŠ‚å†…å®¹è¾ƒå¤šï¼Œå›Šæ‹¬å¾ˆå¤šåŸºç¡€æ€§çš„çŸ¥è¯†ï¼Œå¿…é¡»ç»†è‡´äº†è§£ï¼Œåé¢ç« èŠ‚çš„å†…å®¹ä»¥æœ¬èŠ‚ä¸ºåŸºç¡€ã€‚

#### (2) å¼€å‘è®¾å¤‡åŠ¨æ€åº“çš„åŸºæœ¬æµç¨‹

ä¸€èˆ¬å¼€å‘ä¸€ä¸ªè®¾å¤‡åŠ¨æ€åº“éœ€è¦ç»å†ä¸‰ä¸ªåŸºæœ¬çš„ç¯èŠ‚ï¼š

1. é¦–å…ˆåˆ†æç”¨æˆ·æä¾›çš„åè®®è®¾è®¡æ•°æ®åº“ï¼›
2. å…¶æ¬¡è¿›è¡Œè®¾å¤‡åŠ¨æ€åº“çš„å¼€å‘ï¼›
3. æœ€ååœ¨å¹³å°ä¸­å‘ˆç°è¯¥è®¾å¤‡çš„å®é™…æ•°æ®ã€‚

è®¾å¤‡åŠ¨æ€åº“åªæ˜¯ AlarmCenter å¹³å°ï¼ˆæ•¢ä¸ºå¼€å‘çš„ä¸€ä¸ªåœ¨Windowsä¸‹è¿è¡Œçš„å¤§å‹ç‰©è”ç½‘å¯è§†åŒ–å¹³å°ï¼‰çš„ä¸€éƒ¨åˆ†ï¼Œä½†å®ƒåœ¨æ•´ä¸ªå¹³å°çš„è¿ä½œå½“ä¸­ï¼Œèµ·æ‰¿ä¸Šå¯ä¸‹çš„ä½œç”¨ã€‚å®ƒçš„ä¸»è¦ç”¨é€”æ˜¯æ ¹æ®åè®®é‡‡é›†åº•å±‚è®¾å¤‡çš„æ•°æ®åŠä¸Šä¼ è®¾å¤‡æ•°æ®åˆ°åº”ç”¨å±‚ã€‚

éœ€è¦æ³¨æ„ï¼Œ.NET æ¡†æ¶ç›®å‰æœ‰ .NET Frameworkã€.NET Coreã€Monoç­‰ï¼Œå¼€å‘åŠ¨æ€åº“åº“æ—¶ï¼Œåº”å½“é€‰æ‹© .NET Standard 2.0ã€‚å¾®è½¯ä¸ºäº†å®ç°è·¨å¹³å°ã€å¤šæ¶æ„ï¼Œæ‰€ä»¥ä¼šå‡ºç°å¤šç§ç±»å‹çš„æ¡†æ¶ï¼Œ.NET Standard ä¸æ˜¯æ¡†æ¶ï¼Œè€Œæ˜¯ä¸€ç§ API æ ‡å‡†ï¼Œæ‰€æœ‰çš„ .NET æ¡†æ¶éƒ½å¿…é¡»æŒ‰ç…§è§„èŒƒè®¾è®¡ï¼Œç›®å‰ .NET Standard å…±æœ‰ 8 ä¸ªç‰ˆæœ¬ã€‚ä¸ºäº†ä½¿ç”¨åŠ¨æ€åº“æˆ–å¼€å‘ç›¸åº”çš„æ ‡å‡†ï¼Œä½¿ç”¨çš„ .NET æ¡†æ¶ç‰ˆæœ¬è¦ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ã€‚

| .NET Standard     | 1.0          | 1.1         | 1.2          | 1.3          | 1.4          | 1.5          | 1.6          | 2.0          |
| ----------------- | ------------ | ----------- | ------------ | ------------ | ------------ | ------------ | ------------ | ------------ |
| .NET Core         | 1.0          | 1.0         | 1.0          | 1.0          | 1.0          | 1.0          | 1.0          | 2.0          |
| .NET Framework 1  | 4.5          | 4.5         | 4.5.1        | 4.6          | 4.6.1        | 4.6.1        | 4.6.1        | 4.6.1 2      |
| Mono              | 4.6          | 4.6         | 4.6          | 4.6          | 4.6          | 4.6          | 4.6          | 5.4          |
| Xamarin.iOS       | 10.0         | 10.0        | 10.0         | 10.0         | 10.0         | 10.0         | 10.0         | 10.14        |
| Xamarin.Mac       | 3.0          | 3.0         | 3.0          | 3.0          | 3.0          | 3.0          | 3.0          | 3.8          |
| Xamarin.Android   | 7.0          | 7.0         | 7.0          | 7.0          | 7.0          | 7.0          | 7.0          | 8.0          |
| é€šç”¨ Windows å¹³å° | 10.0         | 10.0        | 10.0         | 10.0         | 10.0         | 10.0.16299   | 10.0.16299   | 10.0.16299   |
| Unity             | 2018 å¹´ 1 æœˆ | 218 å¹´ 1 æœˆ | 2018 å¹´ 1 æœˆ | 2018 å¹´ 1 æœˆ | 2018 å¹´ 1 æœˆ | 2018 å¹´ 1 æœˆ | 2018 å¹´ 1 æœˆ | 2018 å¹´ 1 æœˆ |



#### (3) åˆ›å»ºä¸€ä¸ªè®¾å¤‡åŠ¨æ€åº“

æ ¹æ®è®¾å¤‡åŠ¨æ€åº“å¼€å‘çš„åŸºæœ¬æµç¨‹ä»‹ç»å¯çŸ¥ï¼Œå¼€å‘ä¸€ä¸ªåŠ¨æ€åº“ä¸ä»…ä»…åªæ˜¯ä»£ç å±‚é¢çš„ç¼–ç å·¥ä½œï¼Œå®ƒè¿˜æ¶‰åŠåˆ°äº†æ•°æ®åº“çš„é…ç½®å’Œåº”ç”¨ç¨‹åºç•Œé¢çš„é…ç½®ï¼Œå®ƒä»¬ä¹‹é—´ç›¸äº’åè°ƒå·¥ä½œï¼Œä½¿å¾—è¢«å¼€å‘å‡ºçš„è®¾å¤‡åŠ¨æ€åº“å³ .dll æ–‡ä»¶ï¼Œæœ‰äº†å®Œæ•´çš„æ„ä¹‰ï¼Œä¸‹é¢å°†ä»‹ç»è®¾å¤‡åŠ¨æ€åº“å¦‚ä½•è¢«ä¸Šå±‚åº”ç”¨å¹³å°ï¼ˆAlarmCenterï¼‰é€šè¿‡æ•°æ®åº“çš„åŸºæœ¬é…ç½®è€Œè¢«åŠ è½½ï¼Œåº”ç”¨å±‚åˆæ˜¯æ€æ ·è·å–åŠ¨æ€åº“ä¸­çš„æ•°æ®ç”¨ä»¥å‘ˆç°ï¼Œåç»­è¿˜å°†é€šè¿‡â€œäº†è§£è®¾å¤‡åŠ¨æ€åº“çš„æˆå‘˜â€è¿™ä¸ªå°ç»“ï¼Œè¯¦ç»†è¯´æ˜è®¾å¤‡åŠ¨æ€åº“ä¸­ç»§æ‰¿çš„åŸºç±»å…¬å…±æˆå‘˜æ–¹æ³•çš„æ„ä¹‰åŠæƒ¯ç”¨ç”¨ä¾‹ã€‚

è®¾å¤‡åŠ¨æ€åº“å¹¶ä¸æ˜¯ç‹¬ç«‹çš„ä»£ç åº“ï¼Œæ ¹æ®æ•¢ä¸ºåŠ¨æ€åº“å¼€å‘è§„èŒƒï¼Œå®ƒå¿…é¡»åœ¨åŸæœ‰çš„ä»£ç åº“ä¸­å¼€å‘ä¸Šå±‚ä»£ç ï¼Œå®ç°æ‰€è§„å®šçš„æ¥å£ã€‚ä¸‹é¢å°†ä¾‹ä¸¾æ“ä½œæ­¥éª¤ã€‚

â‘  æ­¥éª¤ä¸€

é¦–å…ˆæ‰“å¼€ `Visual Studio` é€‰æ‹© `æ–°å»ºé¡¹ç›®`ï¼Œæ¨èé€‰æ‹©ç¨‹åºé›†ç‰ˆæœ¬ä¸º `.Net Standard`ï¼ˆå¦‚å›¾ 1.1.1-1 æ‰€ç¤ºï¼‰ï¼Œé¡¹ç›®ç±»å‹åˆ™ä¸ºç±»åº“ï¼Œé¡¹ç›®åç§°è‡ªå®šä¹‰ï¼Œè€Œåæ·»åŠ ä¸€ä¸ªç±»ï¼Œè¿™ä¸ªç±»çš„å…¨ç§°å¿…é¡»ä¸º`CEquip.cs` ã€‚


![1.1.1-1](./Images/1.1.1-1.png)

â‘¡ æ­¥éª¤äºŒ

æ·»åŠ ä¾èµ–åº“ï¼Œåœ¨å¼•ç”¨ç®¡ç†å™¨ä¸­å¼•ç”¨ DataCenter åº“ï¼Œåœ¨ Windows ä¸­ä¸º AlarmCenter.DataCenter.dll ï¼ŒLinux ä¸­ä¸º GWDataCenter.dll ï¼Œä»¥å®é™…æƒ…å†µä¸ºå‡†ã€‚æœ¬æ–‡æ¡£ä»¥ Windows ç¯å¢ƒè¿›è¡Œä¸¾ä¾‹ã€å¼€å‘ã€‚

æ“ä½œæ–¹æ³•ï¼š`å¼•ç”¨ç®¡ç†å™¨ä¸­` -> `é€‰æ‹©æµè§ˆ` -> `D:\AlarmCenter\bin\AlarmCenter.DataCenter.dll` 

â‘¢ æ­¥éª¤ä¸‰  

æ·»åŠ åŠ¨æ€åº“å¼•ç”¨åï¼Œä½¿ç”¨ `using AlarmCenter.DataCenter;` å¼•å…¥å‘½åç©ºé—´ï¼Œç„¶åè®© CEquip ç±» ç»§æ‰¿CEquipBase åŸºç±»ï¼Œå¹¶é€šè¿‡ override å…³é”®å­—é‡å†™å…¶åŸºç±»æˆå‘˜ï¼Œæˆå‘˜æ–¹æ³•å‡ä¸ºå…¬æœ‰çš„ public ç±»å‹ã€‚ä»¥ä¸‹ä¸ºè®¾å¤‡åŠ¨æ€åº“çš„å¤§æ¦‚æ¨¡æ¿ã€‚

```c#
    public class CEquip:CEquipBase
    {  
        public override bool init(EquipItem item)
        {
            return base.init(item);
        }
        public override CommunicationState GetData(CEquipBase pEquip)
        {
            return base.GetData(pEquip);
        }
        public override bool GetYC(DataRow r)
        {
            return base.GetYC(r);
        }
        public override bool GetYX(DataRow r)
        {
            return base.GetYX(r);
        }
        public override bool SetParm(string MainInstruct, 
                                     string MinorInstruct,
                                     string Value)
        {
            return base.SetParm(MainInstruct, MinorInstruct, Value);
        }
    }
```

CEquip ç»§æ‰¿ CEquipBase ç±»ï¼Œé‡å†™çˆ¶ç±»çš„ initã€GetDataã€GetYCã€GetYXã€SetParm æ–¹æ³•ã€‚

æç¤ºï¼šä»¥ä¸€å®šé¡ºåºæŒ‰ <kbd>Ctrl</kbd> + <kbd>A</kbd> <kbd>K</kbd> <kbd>F</kbd> å¯ä»¥æ ¼å¼åŒ–ä»£ç ã€‚

â‘£ æ­¥éª¤å››

æŠŠä»¥ä¸Šä»£ç å¤åˆ¶åˆ° CEquip ç±»ä¸­ï¼Œç„¶åå³é”®ç‚¹å‡»é¡¹ç›®ã€å‘å¸ƒã€åˆ›å»ºé…ç½®æ–‡ä»¶ï¼Œç„¶åå‘å¸ƒé¡¹ç›®ã€‚åº•éƒ¨å›è¾“å‡ºå­˜æ”¾ç”ŸæˆåŠ¨æ€åº“çš„ç›®å½•ï¼Œå¤åˆ¶ç›®å½•åˆ°èµ„æºç®¡ç†å™¨ä¸­æ‰“å¼€ã€‚ç„¶åæŠŠ xxx.dll æ–‡ä»¶å¤åˆ¶ï¼Œæ”¾åˆ° `D:\AlarmCenter\dll` ç›®å½•ä¸­ã€‚

![1.1.1-2](./Images/1.1.1-2.png)

![1.1.1-3](./Images/1.1.1-3.png)

â‘¤ æ­¥éª¤äº”

ç”ŸæˆåŠ¨æ€åº“ã€æŠŠåŠ¨æ€åº“æ”¾åˆ°ç›¸åº”ç›®å½•ï¼Œè¿™ä¸ªåŠ¨æ€åº“ä¾ç„¶ä¸ä¼šè¢« æ•¢ä¸ºç‰©è”å¹³å°è‡ªåŠ¨åŠ è½½ï¼Œè¿˜éœ€è¦é…ç½®æ•°æ®åº“ã€‚
æœ‰äº†åŸºæœ¬çš„åŠ¨æ€åº“ç¯å¢ƒåï¼Œä¸Šå±‚å¹³å°éœ€è¦åŠ è½½è¿™ä¸ªåŠ¨æ€åº“å¹¶æ˜¾ç¤ºç›¸åº”è®¾å¤‡çš„æ•°æ®æˆ–çŠ¶æ€ï¼Œåˆ™éœ€è¦é…ç½®æ•°æ®åº“ã€‚

é¦–å…ˆåœ¨æ•°æ®åº“ä¸­æ·»åŠ ä¸€ä¸ªè®¾å¤‡ï¼ˆå³è¢«åŠ è½½çš„åŠ¨æ€åº“çš„åŸºæœ¬ä¿¡æ¯ï¼Œä¾‹å¦‚å…¶å…¨ç§°ã€è®¾å¤‡ç¼–å·ã€ä»¥åŠéœ€è¦ä¸å¤–ç•Œé€šä¿¡çš„é€šè®¯åœ°å€æˆ–è€…ä¸²å£å·ç­‰ï¼‰ã€‚Mysql ã€Sql Server ã€Access æ•°æ®åº“ç­‰çš„æ“ä½œæ–¹æ³•ä¸€è‡´ï¼Œæ‰“å¼€æ•°æ®åº“åï¼Œå¦‚ä½ æœ‰ SQL åŸºç¡€ï¼Œå¯ä»¥çœ‹æ‡‚ Equip è¡¨çš„è®¾è®¡(ä¸åŒæ•°æ®åº“æœ‰å·®å¼‚)ã€‚

å…³äºæ•°æ®åº“çš„å­—æ®µè¯´æ˜å’Œé…ç½®ï¼Œæ–‡æ¡£åé¢å›è¯¦ç»†è®²è§£ã€‚åœ¨è¿™é‡Œï¼Œä½ éœ€è¦è®°ä½ï¼šequip åˆ—æ˜¯ä¸»é”®ï¼Œequip_nm æ˜¯è®¾å¤‡çš„åç§°ï¼Œæ­¤å¤„å‡å®šè®¾å¤‡ï¼ˆä¾‹å¦‚ç©ºè°ƒï¼‰ï¼›communication_drv éœ€è¦ç»‘å®šçš„åŠ¨æ€åº“ï¼Œä¹Ÿå°±æ˜¯ä¸Šä¸€æ­¥å¤åˆ¶çš„ dll æ–‡ä»¶åç§°ï¼ˆxxx.dllï¼‰ï¼Œéœ€è¦å­˜æ”¾åœ¨ `D:\AlarmCenter\dll` ã€‚

æ ¹æ®ä¸Šé¢çš„ SQL ä»£ç ä¸­çš„ NOT NULL ï¼Œå¡«å†™æŒ‡å®šå­—æ®µã€‚					

â‘¥ æ­¥éª¤å…­

ä¸Šå±‚åº”ç”¨è‹¥éœ€æ˜¾ç¤ºè®¾å¤‡çš„å€¼æˆ–è€…çŠ¶æ€ï¼Œåˆ™éœ€è¦é…ç½® ycp æˆ– yxp è¡¨ã€‚Equip è¡¨è®©ç¨‹åºçŸ¥é“æœ‰è¿™ä¸ªè®¾å¤‡ï¼Œä½†æ˜¯éœ€è¦è·å–æŸäº›æ•°æ®æˆ–çŠ¶æ€ï¼Œåˆ™éœ€è¦é…ç½® é¥æµ‹ï¼ˆycpè¡¨ï¼‰ã€é¥ä¿¡ï¼ˆyxpè¡¨ï¼‰ã€‚ä¸ºäº†å¢åŠ ä¸€ä¸ªæ¨¡æ‹Ÿè®¾å¤‡ï¼Œè¯·åœ¨æ•°æ®åº“ä¸­æ ¹æ®è¦æ±‚æ·»åŠ æ•°æ®ï¼Œå…³äºè¡¨çš„å…·ä½“è¯´æ˜è¯·å‚é˜…æœ¬ç« çš„é™„è¡¨ã€‚

| Equip è¡¨                 |             |                     |              |
| :----------------------- | :---------- | :------------------ | ------------ |
| å­—æ®µåç§°                 | å€¼          | å­—æ®µç±»å‹            | å€¼           |
| sta_n                    | 1           | equip_no            | 1            |
| equip_nm                 | æ¨¡æ‹Ÿè®¾å¤‡111 | equip_detail        | è¿™æ˜¯æ¨¡æ‹Ÿè®¾å¤‡ |
| acc_cyc                  | 1           | proc_advice         | è¯·æ£€æŸ¥çº¿è·¯   |
| out_of_contact           | å‘ç”Ÿæ•…éšœ    | contacted           | å·²æ¢å¤       |
| communication_drv        | xxx.dll     | local_addr          | COM1         |
| equip_addr               | 1           | communication_param | 1            |
| communication_time_param | 1           | raw_equip_no        | 1            |
| alarm_scheme             | 0           | attrib              | 0            |
| AlarmRiseCycle           | 0           |                     |              |
|                          |             |                     |              |

| Ycp è¡¨                |                         |                         |                         |
| :-------------------- | :---------------------- | :---------------------- | ----------------------- |
| å­—æ®µåç§°              | å€¼                      | å­—æ®µç±»å‹                | å€¼                      |
| sta_n                 | 1                       | equip_no                | 1                       |
| yc_no                 | 1                       | yc_nm                   | æ¨¡æ‹Ÿæµ‹ç‚¹1               |
| Mapping               | False                   | yc_min                  | 0                       |
| yc_max                | 1000                    | physic_min              | 0                       |
| physic_max            | 1000                    | val_min                 | 0                       |
| restore_min           | 0                       | restore_max             | 1000                    |
| val_max               | 1000                    | val_trait               | 0                       |
| main_instruction      | 0                       | minor_instruction       | 0                       |
| safe_bgn              | 2001-01-01 00:00:00.000 | safe_end                | 2001-01-01 00:00:00.000 |
| alarm_acceptable_time | å¯ä»¥ä¸ºç©º                | restore_acceptable_time | 0                       |
| alarm_repeat_time     | 0                       | proc_advice             | è¯·å¤„ç†                  |
| lvl_level             | 0                       | outmin_evt              | è¿‡ä½                    |
| outmax_evt            | è¿‡é«˜                    | alarm_scheme            | 0                       |
| curve_rcd             | True                    | curve_limit             | 0                       |

â‘¦ æ­¥éª¤ä¸ƒ

é…ç½®æ•°æ®åº“ï¼Œéœ€è¦é‡å¯ AlarmCenter å¹³å°ï¼Œæ–¹èƒ½åŠ è½½æ–°å¢çš„åŠ¨æ€åº“ã€‚åœ¨ä»»åŠ¡ç®¡ç†å™¨æ‰¾åˆ° `AlarmCenterServiceæœåŠ¡` ï¼Œå³é”®å¼¹å‡ºèœå•ç‚¹å‡»åœæ­¢ï¼Œå¾…åœæ­¢åå†å³é”®å¼¹å‡ºèœå•ç‚¹å‡»å¼€å§‹ã€‚

â‘§ æ­¥éª¤å…«

æ‰“å¼€ **AlarmCenter å¹³å°**  ->  **æŸ¥çœ‹**  -> **è®¾å¤‡åˆ—è¡¨æ¿**ï¼Œå³å¯å‘¼å‡ºå¯¼èˆªé¢æ¿ã€‚

æç¤ºï¼šå¦‚ä½ çš„ AlarmCenter è½¯ä»¶ç¼ºå°‘èœå•æ ï¼Œè¯·å’¨è¯¢ä½ çš„éƒ¨é—¨é¢†å¯¼æˆ–åŒäº‹ã€‚

![1.1.1-4](./Images/1.1.1-4.png)

â‘¨ æ­¥éª¤ä¹

åœ¨èœå•æ ç‚¹å‡» **é…ç½®** -> **è®¾å¤‡åˆ—è¡¨é…ç½®**ï¼Œå°±ä¼šå‘¼å‡ºè®¾å¤‡èŠ‚ç‚¹ ï¼Œåœ¨æ ¹èŠ‚ç‚¹å³é”®ç‚¹å‡»ï¼Œç„¶åé€‰æ‹© **æ·»åŠ èŠ‚ç‚¹** ï¼Œé€‰æ‹©åœ¨æ•°æ®åº“æ·»åŠ çš„ **æ¨¡æ‹Ÿè®¾å¤‡1111**ï¼Œç‚¹å‡»**ç¡®å®š**ã€**ä¿å­˜**ã€‚ç„¶åä¼šåœ¨è®¾å¤‡åˆ—è¡¨çœ‹åˆ°æ–°æ·»åŠ çš„è®¾å¤‡ã€‚

![1.1.1-5](./Images/1.1.1-5.PNG)

![1.1.1-6](./Images/1.1.1-6.PNG)

â‘©æ­¥éª¤å

åœ¨è®¾å¤‡åˆ—è¡¨å¯¼èˆªæ ï¼Œç‚¹å‡» **æ¨¡æ‹Ÿè®¾å¤‡** å¯ä»¥çœ‹åˆ°é¥ä¿¡å’Œé¥æµ‹ã€‚å½“ç„¶ï¼Œå› ä¸ºåœ¨ä¸Šé¢æ­¥éª¤æ‰€ç¼–å†™çš„ä»£ç ä¸­ï¼Œåªæœ‰æœ€åŸºæœ¬çš„ä»£ç ï¼Œæ— æ³•åƒä¸‹å›¾è·å–åˆ°æ•°æ®ã€‚ä¸‹é¢å°†ä¼šè¯¦ç»†è®²è§£å¦‚ä½•ç¼–å†™åŠ¨æ€åº“ã€‚

![1.1.1-7](./Images/1.1.1-7.jpg)



#### (4) äº†è§£è®¾å¤‡åŠ¨æ€åº“çš„æˆå‘˜

ä¸ºäº†ç†è§£åŠ¨æ€åº“çš„ç¼–å†™ï¼Œæˆ‘ä»¬æ¥å®é™…ç¼–å†™ä»£ç ï¼Œäº†è§£ç¼–å†™è¿‡ç¨‹ã€‚

![1.1.1-8](./Images/1.1.1-8.png)

##### â‘  init() è®¾å¤‡åˆå§‹åŒ–æ–¹æ³•

init() æ–¹æ³•ç”¨äºåˆå§‹åŒ–è®¾å¤‡ï¼Œåœ¨æ•°æ®åº“ä¸­æå‰è®¾å¤‡ä¿¡æ¯ã€å¼€å§‹å¯¹é€šè®¯è®¾å¤‡å»ºç«‹è¿æ¥ç­‰ï¼Œæ˜¯åŠ¨æ€åº“æœ€å…ˆè¢«æ‰§è¡Œçš„æ–¹æ³•ã€‚

å®šä¹‰ï¼š

```c#
public override bool init(AlarmCenter.DataCenter.EquipItem item)
```

ä½¿ç”¨ç¤ºä¾‹ï¼š

```c#
        bool IsInit = true; // é˜²æ­¢è¿ç»­è®°å½•æ—¥å¿—
        int Interval = 0;   // åˆ·æ–°é—´éš”
        public override bool init(EquipItem item)
        {
            if (!base.init(item))//è®¾å¤‡åˆå§‹ï¼Œå¤±è´¥å°±è®°å½•æ—¥å¿—
            {
                if (IsInit)
                    DataCenter.WriteLogFile("Domeåˆå§‹åŒ–å¤±è´¥");//å†™æ—¥å¿—åœ¨Dataç›®å½•XLogä¸­
                IsInit = false;
                return false; //è®¾å¤‡é€šè®¯å¼‚å¸¸
            }
            //è¯»å–æ•°æ®åº“Equipè¡¨communication_time_paramå­—æ®µé…ç½®ï¼Œè¡¨ä¼‘çœ æ—¶é—´
            Interval = Convert.ToInt32(item.communication_time_param);
            return true; //è®¾å¤‡é€šè®¯æ­£å¸¸
        }
```

**å·¥ä½œåŸç†ï¼š**

CEquip é‡Œçš„æ–¹æ³•ä¼šè¢«ä¸æ–­å¾ªç¯æ‰§è¡Œï¼Œinit æ–¹æ³•ä¹Ÿä¼šè¢«ä¸æ–­æ‰§è¡Œã€‚`base.init(item)` æ˜¯åŸºç±»æ–¹æ³•ï¼Œç”¨äºåˆå§‹åŒ–ï¼ŒåŸºç±»ä¸­é»˜è®¤æ”¯æŒ Modbus ç­‰åè®®ï¼Œå½“ç„¶ä½ å¯ä»¥ä¸ä½¿ç”¨åŸºç±»çš„åˆå§‹åŒ–æ–¹æ³•ï¼Œä½ å¯ä»¥è‡ªå·±ç¼–å†™åˆå§‹åŒ–æ–¹æ³•ã€‚ä¸Šé¢çš„ä»£ç é€‚åˆ UDP åè®®ï¼Œå› ä¸ºæ¯æ¬¡æ‰§è¡Œ init æ–¹æ³•ï¼Œéƒ½ä¼šåˆå§‹åŒ–ä¸€æ¬¡ã€‚å¯¹äºéœ€è¦ä¿æŒé•¿è¿æ¥çš„æ–¹æ³•ï¼Œè¦é¿å…è¢«äºŒæ¬¡åˆå§‹åŒ–ã€‚

**è§£æï¼š**

1. `Init()` æ–¹æ³•åœ¨æ¡†æ¶ä¸­ä¼šè¢«å¾ªç¯è°ƒç”¨ï¼Œè¿”å›å€¼ `bool` ä¸º `Ture` æ—¶ä»£è¡¨è®¾å¤‡åˆå§‹åŒ–æˆåŠŸ,å¹¶å¼€å§‹æ‰§è¡Œå…¶ä»–æˆå‘˜æ–¹æ³•ï¼Œä¸º `false` æ—¶åˆ™ä»£è¡¨è®¾å¤‡åˆå§‹åŒ–å¤±è´¥ï¼Œåˆå§‹åŒ–å¤±è´¥æ—¶åˆ™é˜»å¡æ­¤ç±»ä¸­å…¶ä»–æ–¹æ³•çš„è¿è¡Œã€‚
2. `Equipitem` å‚æ•°ä¸º `AlarmCenter.DataCenter` å‘½åç©ºé—´ä¸‹çš„ `Equipitem` ç±»ï¼Œå¹¶ç»§æ‰¿`IComparable` æ¥å£ï¼Œå…¶åŒ…å«äº†è®¾å¤‡çš„æ‰€æœ‰å±æ€§ï¼Œå¹¶èšåˆäº†æ•°æ®åº“çš„æ“ä½œç±» `Database` å’Œç”¨äºä¸è®¾å¤‡é€šè®¯çš„ `SerialPort`ç±»ã€‚
3. `DataCenter.WriteLogFile()` æ˜¯ `AlarmCenter.DataCenter` å‘½åç©ºé—´ä¸‹çš„ `DataCenter` ç±»ä¸­çš„ä¸€ä¸ªè®°å½•é”™è¯¯æ—¥å¿—çš„æ–¹æ³•ï¼Œå…¶æ—¥å¿—è®°å½•åœ¨ `D:\AlarmCenter\data\XLog.txt` æ–‡ä»¶ä¸­ã€‚
4. `item.communication_time_param`æ˜¯ `Equipitem` ç±»ä¸­çš„ä¸€ä¸ªå­—æ®µï¼Œå®ƒæ˜ å°„è‡ªæ•°æ®åº“ `Equip` è¡¨çš„ `communication_time_param` å­—æ®µï¼Œä»£è¡¨åˆ·æ–°é—´éš”ã€‚



##### â‘¡ GetData() æ–¹æ³•

åˆå§‹åŒ–è®¾å¤‡åï¼Œå¼€å§‹æ‰§è¡Œæ­¤æ–¹æ³•ï¼Œæ ¹æ® CEquip çš„å·¥ä½œä»»åŠ¡ï¼Œå¯ä»¥åˆ†ä¸º ycp/yxp è¡¨è¯»å–æ•°æ®ã€setparm è¡¨è®¾ç½®æ•°æ®ä¸¤å¤§éƒ¨åˆ†ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œsetparm æ§åˆ¶æŸäº›åŠ¨ä½œï¼Œè¿™æ ·ä¼šå½±å“æ•°æ®çš„å‡†ç¡®æ€§ï¼Œå› æ­¤ GetData() æ–¹æ³•åœ¨æ­¤æ§åˆ¶ç¨‹åºçš„å·¥ä½œã€‚

å®šä¹‰ï¼š

```c#
public override AlarmCenter.DataCenter.CommunicationState GetData(AlarmCenter.DataCenter.CEquipBase pEquip)
```

ä½¿ç”¨ç¤ºä¾‹ï¼š

```c#
public override CommunicationState GetData(CEquipBase pEquip)
{
    if (RunSetParmFlag) //å¦‚æœæœ‰è®¾ç½®è¯·æ±‚ï¼Œå°†ç«‹å³è¿”å›ï¼Œè¿›è¡Œè®¾ç½®æ“ä½œ
    {
        return CommunicationState.setreturn;
    }
    Sleep(Interval);//çº¿ç¨‹ç­‰å¾…ï¼Œæ§åˆ¶åˆ·æ–°é—´éš”
    return base.GetData(pEquip);
}
```

**è§£æï¼š**

1. `CommunicationState` æ˜¯ä¸€ä¸ªçŠ¶æ€æšä¸¾ï¼Œä»£è¡¨å½“å‰æ•°æ®è§£ææˆåŠŸï¼Œå¤±è´¥ç­‰çŠ¶æ€ä¿¡æ¯ï¼Œå¦‚æœéªŒè¯æˆåŠŸååˆ™è¿”å›åŸºç±»çš„ `GetData()` æ–¹æ³•ç»§ç»­æ‰§è¡Œï¼Œå¤±è´¥åˆ™é˜»å¡ `GetYC()`ã€ ` GetYX()`ï¼Œ`SetParm()` æ–¹æ³•çš„è¿è¡Œã€‚
2. `GetData` æ–¹æ³•åœ¨è¿è¡Œæ—¶åŒ…å« `CEquipBase` ç±»å¯¹è±¡ï¼Œå®ƒåŒ…å«äº†æ‰€æœ‰æµ‹ç‚¹ä¿¡æ¯ï¼Œå¯ä»¥åœ¨å…¶ä¸­åšæ•°æ®æ ¡éªŒï¼Œå› ä¸ºåœ¨å…·ä½“è®¾å¤‡é€šè®¯ä¸­ï¼Œéœ€è¦å¯¹è¿”å›çš„æ•°æ®è¿›è¡ŒéªŒè¯ã€‚ä¸€èˆ¬è¿›è¡Œæ•°æ®éªŒè¯ä¼šä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢å¼€å§‹ï¼Œå¦‚ï¼šè®¾å¤‡åœ°å€ï¼ˆå¦‚æœåè®®æœ‰å®šä¹‰çš„è¯ï¼‰ã€è¿”å›æ•°æ®é•¿åº¦ã€å®Œæ•´æ€§æ ¡éªŒï¼ˆæ ¹æ®åè®®å¯èƒ½æœ‰CRCã€å’Œæ ¡éªŒç­‰ï¼‰ã€‚å¦‚ Modbus åè®®ä¸­ï¼Œæœ€åä¸¤ä¸ªå­—èŠ‚è¿›è¡Œ CRC æ ¡éªŒï¼ŒåŒæ—¶è¿˜éœ€è¦å¯¹è®¾å¤‡åœ°å€è¿›è¡Œå…¨é¢çš„æ ¡éªŒï¼Œå¦åˆ™æ”¶åˆ°é”™è¯¯çš„æ•°æ®åŒ…å°†å¯¼è‡´å®é™…è®¾å¤‡å¼‚å¸¸å“åº”ã€‚
3. `Sleep()` æ–¹æ³•æ˜¯ `CEquipBase` åŸºç±»ä¸­æä¾›ç”¨äºä¼‘çœ  `GetData()` æ–¹æ³•ã€‚



##### â‘¢ GetYC() é¥æµ‹æ–¹æ³•

å®šä¹‰ï¼š

```c#
public override bool GetYC(System.Data.DataRow r)
```

ä½¿ç”¨ç¤ºä¾‹ï¼š

```c#
public override bool GetYC(DataRow r)
{
    if (r[ "main_instruction" ].ToString()==â€œAâ€ )                  
    SetYCData(r,100);//ä¸ºmain_instructionå­—æ®µé…ç½®ä¸ºAçš„é¥æµ‹ç‚¹èµ‹å€¼ä¸º100  
    else
    SetYCData(r,50);//å¦åˆ™ï¼Œä¸ºé¥æµ‹ç‚¹èµ‹å€¼50
    return true;//è®¾ç½®æˆåŠŸ
}
```

**è§£æï¼š**

1. `GetYC()`æ–¹æ³•æ ¹æ®å½“å‰è®¾å¤‡æ‰€æ‹¥æœ‰çš„é¥æµ‹ç‚¹æ•° N æ¡æ‰§è¡Œ N æ¬¡ï¼Œå‚æ•° `DataRow` è¡¨ç¤ºæ˜ å°„è‡ªæ•°æ®åº“ `ycp` é¥æµ‹è¡¨çš„æŸä¸€ä¸ªå®ä½“å³æ•°æ®è¡Œã€‚
2. `bool` è¡¨ç¤ºä¸ºå½“å‰æµ‹ç‚¹è®¾ç½®å€¼æ˜¯å¦æˆåŠŸï¼Œä¸æˆåŠŸåˆ™è®¾å¤‡æ•…éšœã€‚
3. `r[ "main_instruction" ]` è¡¨ç¤ºè·å–æ•°æ®åº“ä¸­çš„ `main_instruction` åˆ—çš„å€¼ï¼Œå¯ä»¥æ ¹æ®ä¸åŒæµ‹ç‚¹é…ç½®çš„å‚æ•°ï¼Œåˆ¤æ–­è¯¥æµ‹ç‚¹éœ€è¦ä½•ç§æ•°æ®ã€‚
4. `SetYCData(r,object)` ä¸Šä¼ é¥æµ‹å€¼ç»™ä¸Šå±‚åº”ç”¨ï¼Œè¿™ä¸ªå€¼æ˜¯ä¸€ä¸ª `Object` ç±»å‹ã€‚



##### â‘£ GetYX() é¥ä¿¡æ–¹æ³•

å®šä¹‰ï¼š

```c#
public override bool GetYX(System.Data.DataRow r)
```

ä½¿ç”¨ç¤ºä¾‹ï¼š

```c#
public override bool GetYX(DataRow r)
{
    Random _random=new Random();//éšæœºæ•°
    var minValue = 0;
    var maxValue = 100;
    var value = 1;//è¿™é‡Œå‡è®¾åè®®æŒ‡æ˜æ•°æ®1ä»£è¡¨é—¨çŠ¶æ€ä¸ºå¼€
    //æ£€æµ‹æ˜¯å¦ä¸ºæ•´æ•°
    if (!Int32.TryParse(r["main_instruction"].ToString(), out value))
        return false;
    try
    {
        var result = _random.Next(minValue, maxValue);
        SetYXData(r, result == value);//å½“å‰æµ‹ç‚¹çš„resulå€¼ä¸º1ï¼Œè¡¨ç¤ºé—¨çŠ¶æ€ä¸ºå¼€
        return true;//è®¾ç½®æˆåŠŸ
    }
    catch
    {
        return false;
    }
}
```

**è§£æï¼š**

1. `DataRow` æ˜ å°„äº† yxp è¡¨çš„æ•°æ®è¡Œï¼Œ`bool` è¡¨ç¤ºä¸ºå½“å‰æµ‹ç‚¹è®¾ç½®çŠ¶æ€æ˜¯å¦æˆåŠŸï¼Œä¸æˆåŠŸåˆ™è®¾å¤‡çŠ¶æ€æ˜¾ç¤ºä¸ºæ•…éšœï¼ˆç°è‰²ç¯ï¼‰ã€‚
2. `GetYX()` æ–¹æ³•æ ¹æ®å½“å‰è®¾å¤‡æ‰€æ‹¥æœ‰çš„é¥ä¿¡ç‚¹æ•° N æ¡æ‰§è¡Œ N æ¬¡ã€‚
3. `SetYXData(r,bool)` è¡¨ç¤ºä¸ºå½“å‰çš„æµ‹ç‚¹è®¾ç½®çŠ¶æ€ï¼Œè¿™ä¸ªçŠ¶æ€æ˜¯ä¸€ä¸ª `bool` ç±»å‹ï¼Œè¿”å›`True` åˆ™æ­£å¸¸(ç»¿ç¯)ï¼Œ`False` åˆ™è­¦æŠ¥(çº¢ç¯)ã€‚



##### â‘¤ SetParm() è®¾ç½®æ–¹æ³•

å®šä¹‰ï¼š

```c#
public override bool SetParm(string MainInstruct, string MinorInstruct, string Value)
```

ä½¿ç”¨ç¤ºä¾‹ï¼š

```c#
public override bool SetParm(string MainInstruct, string MinorInstruct, string Value)
{
     switch (MainInstruct.ToLower())//è·å–SetParmè¡¨MainInstructå­—æ®µæ•°æ®
     {
        case "interval":
          {
            Interval = Convert.ToInt32(Value);//æ§åˆ¶è®¾å¤‡çš„åˆ·æ–°æ—¶é—´é—´éš”
             return true;//æ§åˆ¶æˆåŠŸ
          }
         default:
            return false;
     }
}
```

**è§£æï¼š**

1. `SetParm()`æ–¹æ³•ç›¸å½“äºä¸€ä¸ª `Button` äº‹ä»¶ï¼Œç”¨äºå‘è®¾å¤‡å‘é€å‘½ä»¤ã€‚
2. æä¾›æ˜ å°„ Setparm è¡¨çš„ä¸‰ä¸ªå­—æ®µ `MainInstruct`ã€`MinorInstruct`ã€`Value` ç”¨äºæä¾›å‘½ä»¤å‚æ•°å’ŒåŒºåˆ†å‘é€çš„å‘½ä»¤ã€‚
3. è¿”å›å€¼ `True` è¡¨ç¤ºå½“å‰å‘½ä»¤è®¾ç½®æˆåŠŸ,`False` è¡¨ç¤ºè®¾ç½®å¤±è´¥ã€‚



#### (5) é™„å½•

æç¤ºï¼šä¸åŒæ“ä½œç³»ç»Ÿã€ä¸åŒç±»å‹çš„æ•°æ®å¼•æ“ã€ä¸åŒçš„ç‰ˆæœ¬ï¼Œæ•°æ®åº“æœ‰æ‰€å·®å¼‚ï¼Œä»¥å®é™…ä¸ºå‡†ã€‚

##### â‘  Equipè¡¨ï¼ˆè®¾å¤‡è¡¨ï¼‰

| å­—æ®µåç§°                 | æ•°æ®ç±»å‹      | æè¿°                   |
| :----------------------- | :------------ | :--------------------- |
| sta_nğŸ”’                   | int           | ç«™ç‚¹å·                 |
| yao'sequip_no            | int           | è®¾å¤‡å·                 |
| equip_nm                 | nvarchar(64)  | è®¾å¤‡åç§°               |
| equip_detail             | nvarchar(255) | è®¾å¤‡è¯¦æƒ…               |
| acc_cyc                  | int           | å¾ªç¯å‘¨æœŸ               |
| related_pic              | nvarchar(255) | å…³è”å›¾ç‰‡               |
| proc_advice              | nvarchar(255) | å¤„ç†æ„è§               |
| out_of_contact           | nvarchar(64)  | é€šè®¯æ•…éšœæ—¶æç¤ºä¿¡æ¯     |
| contacted                | nvarchar(64)  | é€šè®¯æ¢å¤æ­£å¸¸æ—¶æç¤ºä¿¡æ¯ |
| communication_drv        | nvarchar(128) | è®¾å¤‡åŠ¨æ€åº“åç§°         |
| local_addr               | nvarchar(64)  | æœ¬åœ°åœ°å€               |
| equip_addr               | nvarchar(128) | è®¾å¤‡åœ°å€               |
| communication_param      | nvarchar(MAX) | é€šè®¯å‚æ•°               |
| communication_time_param | nvarchar(32)  | é€šè®¯æ—¶é—´å‚æ•°é™„è¡¨åç§°   |
| raw_equip_no             | int           |                        |
| tabname                  | nvarchar(15)  | é™„è¡¨åç§°               |
| alarm_scheme             | int           |                        |
| attrib                   | int           |                        |
| sta_IP                   | nvarchar(255) | ç«™ç‚¹IPåœ°å€             |
| AlarmRiseCycle           | int           | æŠ¥è­¦å‡çº§å‘¨æœŸ           |
| related_video            | nvarchar(255) | å…³è”è§†é¢‘               |
| ZiChanID                 | nvarchar(255) | èµ„äº§ç¼–å·               |
| PlanNo                   | nvarchar(255) | é¢„æ¡ˆå·                 |
| SafeTime                 | nvarchar(MAX) | å®‰å…¨æ—¶æ®µ               |
| Reserve1                 | nvarchar(MAX) | ä¿ç•™å­—æ®µ1              |
| Reserve2                 | nvarchar(MAX) | ä¿ç•™å­—æ®µ2              |
| Reserve3                 | nvarchar(MAX) | ä¿ç•™å­—æ®µ2              |

##### â‘¡ ycpè¡¨ï¼ˆé¥æµ‹è¡¨ï¼‰

| å­—æ®µåç§°                | æ•°æ®ç±»å‹      | æè¿°                   |
| :---------------------- | :------------ | :--------------------- |
| sta_n                   | int           | ç«™ç‚¹å·                 |
| equip_noğŸ”’               | int           | è®¾å¤‡å·                 |
| yc_noğŸ”’                  | int           | é¥æµ‹å·                 |
| yc_nm                   | nvarchar(80)  | é¥æµ‹åç§°               |
| Mapping                 | bit           | æ˜¯å¦è¿›è¡Œè½¬æ¢           |
| yc_min                  | float         | æœ€å°å€¼                 |
| yc_max                  | float         | æœ€å¤§å€¼                 |
| physic_min              | float         | å®æµ‹æœ€å°å€¼             |
| physic_max              | float         | å®æµ‹æœ€å¤§å€¼             |
| val_min                 | float         | ä¸‹é™å€¼                 |
| restore_min             | float         | æ¢å¤ä¸‹é™å€¼             |
| restore_max             | float         | æ¢å¤ä¸Šé™å€¼             |
| val_max                 | float         | ä¸Šé™å€¼                 |
| val_trait               | int           |                        |
| main_instruction        | nvarchar(254) | æ“ä½œå‘½ä»¤               |
| minor_instruction       | nvarchar(254) | æ“ä½œå‚æ•°               |
| safe_bgn                | datetime      | èµ·å§‹å®‰å…¨æ—¶é—´           |
| safe_end                | datetime      | ç»“æŸå®‰å…¨æ—¶é—´           |
| alarm_acceptable_time   | int           | è¶Šé™å®¹è®¸æ—¶é—´(ç§’)       |
| restore_acceptable_time | int           | æ¢å¤å®¹è®¸æ—¶é—´(ç§’)       |
| alarm_repeat_time       | int           | é‡å¤æŠ¥è­¦æ—¶é—´(åˆ†é’Ÿ)     |
| proc_advice             | nvarchar(254) | å¤„ç†æ„è§               |
| lvl_level               | int           | äº‹ä»¶çº§åˆ«               |
| outmin_evt              | nvarchar(64)  | è¶Šä¸‹é™äº‹ä»¶             |
| outmax_evt              | nvarchar(64)  | è¶Šä¸Šé™äº‹ä»¶             |
| wave_file               | nvarchar(64)  | å£°éŸ³æ–‡ä»¶               |
| related_pic             | nvarchar(255) | å…³è”é¡µé¢               |
| alarm_scheme            | int           |                        |
| curve_rcd               | bit           | æ˜¯å¦è®°å½•æ›²çº¿           |
| curve_limit             | float         | æ›²çº¿é™åˆ¶               |
| alarm_shield            | nvarchar(MAX) |                        |
| Unit                    | nvarchar(50)  | å•ä½                   |
| AlarmRiseCycle          | int           | æŠ¥è­¦å‡çº§å‘¨æœŸ(å•ä½åˆ†é’Ÿ) |
| related_video           | nvarchar(255) | å…³è”è§†é¢‘               |
| ZiChanID                | nvarchar(255) | èµ„äº§                   |
| PlanNo                  | nvarchar(255) | é¢„æ¡ˆ                   |
| SafeTime                | nvarchar(MAX) | å®‰å…¨æ—¶æ®µ               |
| Reserve1                | nvarchar(MAX) | ä¿ç•™å­—æ®µ1              |
| Reserve2                | nvarchar(MAX) | ä¿ç•™å­—æ®µ2              |
| Reserve3                | nvarchar(MAX) | ä¿ç•™å­—æ®µ3              |

##### â‘¢ yxpè¡¨ï¼ˆé¥ä¿¡è¡¨ï¼‰

| å­—æ®µåç§°                | æ•°æ®ç±»å‹      | æè¿°                   |
| :---------------------- | :------------ | :--------------------- |
| sta_n                   | int           | ç«™ç‚¹å·                 |
| equip_noğŸ”’               | int           | è®¾å¤‡å·                 |
| yx_noğŸ”’                  | int           | é¥ä¿¡å·                 |
| yx_nm                   | nvarchar(80)  | é¥ä¿¡åç§°               |
| proc_advice_r           | nvarchar(254) | å¤„ç†æ„è§0-1            |
| proc_advice_d           | nvarchar(254) | å¤„ç†æ„è§1-0            |
| level_r                 | int           | 0-1äº‹ä»¶çº§åˆ«            |
| level_d                 | int           | 1-0äº‹ä»¶çº§åˆ«            |
| evt_01                  | nvarchar(64)  | 0-1äº‹ä»¶æè¿°            |
| evt_10                  | nvarchar(64)  | 1-0äº‹ä»¶æè¿°            |
| main_instruction        | nvarchar(254) | æ“ä½œå‘½ä»¤               |
| minor_instruction       | nvarchar(254) | æ“ä½œå‚æ•°               |
| safe_bgn                | datetime      | èµ·å§‹å®‰å…¨æ—¶é—´           |
| safe_end                | datetime      | ç»“æŸå®‰å…¨æ—¶é—´           |
| alarm_acceptable_time   | int           | è¶Šé™å®¹è®¸æ—¶é—´(ç§’)       |
| restore_acceptable_time | int           | æ¢å¤å®¹è®¸æ—¶é—´(ç§’)       |
| alarm_repeat_time       | int           | é‡å¤æŠ¥è­¦æ—¶é—´(åˆ†é’Ÿ)     |
| wave_file               | nvarchar(64)  | å£°éŸ³æ–‡ä»¶               |
| related_pic             | nvarchar(255) | å…³è”é¡µé¢               |
| alarm_scheme            | int           |                        |
| Inversion               | å¸ƒå°”          | æ˜¯å¦å–å               |
| Initval                 | int           | æ›²çº¿é™åˆ¶               |
| val_trait               | int           |                        |
| alarm_shield            | nvarchar(MAX) | å•ä½                   |
| AlarmRiseCycle          | int           | æŠ¥è­¦å‡çº§å‘¨æœŸ(å•ä½åˆ†é’Ÿ) |
| related_video           | nvarchar(255) | å…³è”è§†é¢‘               |
| ZiChanID                | nvarchar(255) | èµ„äº§                   |
| PlanNo                  | nvarchar(255) | é¢„æ¡ˆ                   |
| SafeTime                | nvarchar(MAX) | å®‰å…¨æ—¶æ®µ               |
| Reserve1                | nvarchar(MAX) | ä¿ç•™å­—æ®µ1              |
| Reserve2                | nvarchar(MAX) | ä¿ç•™å­—æ®µ2              |
| Reserve3                | nvarchar(MAX) | ä¿ç•™å­—æ®µ3              |

##### â‘£ SetParmè¡¨ï¼ˆè®¾ç½®å‘½ä»¤è¡¨ï¼‰

| å­—æ®µåç§°          | æ•°æ®ç±»å‹      | æè¿°         |
| :---------------- | :------------ | :----------- |
| sta_n             | int           | ç«™ç‚¹å·       |
| equip_noğŸ”’         | int           | è®¾å¤‡å·       |
| set_noğŸ”’           | int           | è®¾ç½®å·       |
| set_nm            | nvarchar(MAX) | è®¾ç½®åç§°     |
| set_type          | nvarchar(1)   | è®¾ç½®ç±»å‹     |
| main_instruction  | nvarchar(64)  | æ“ä½œå‘½ä»¤     |
| minor_instruction | nvarchar(MAX) | æ“ä½œå‚æ•°     |
| Record            | bit           | æ˜¯å¦è®°å½•     |
| Action            | nvarchar(16)  |              |
| Value             | nvarchar(MAX) | è®¾ç½®å€¼       |
| canexecution      | bit           | æ˜¯å¦å¯ä»¥æ‰§è¡Œ |
| VoiceKeys         | nvarchar(MAX) |              |
| EnableVoice       | bit           |              |
| Reserve1          | nvarchar(MAX) | ä¿ç•™å­—æ®µ1    |
| Reserve2          | nvarchar(MAX) | ä¿ç•™å­—æ®µ2    |
| Reserve3          | nvarchar(MAX) | ä¿ç•™å­—æ®µ3    |
| qr_equip_no       | int           |              |

